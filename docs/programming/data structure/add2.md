# 并查集
## 定义
- 逻辑结构：集合
- 用于分类
- 有合并和查找功能的集合
- 各个集合间元素不相交
## 基本操作
- Initial(S) ![图片](./并查集-幕布图片-826685-751604.jpg)
- FInd(S,x) ![图片](./并查集-幕布图片-65993-676264.jpg)
- Union(S,Root1,Root2) ![图片](./并查集-幕布图片-605592-197495.jpg)
## 存储结构
- 顺序存储 ![图片](./并查集-幕布图片-301226-436026.jpg)
- 每个集合组织成一棵树，用树的双亲表示法
- 根结点的内容为负值，其绝对值为该集合中结点的个数
## 优化
- Union(S,Root1,Root2)的优化
    - 针对Find(S,x)最坏时间复杂度O(n)，原因是树高不受控制
    - 在每次Union构建树时，尽可能让树的高度不增加。
    - 通过比较集合内元素个数判断大小，每次都让小的成为大的的子树
    - 代码 ![图片](./并查集-幕布图片-598142-779632.jpg)
    - 优化后构造的树高不超过（logn）下取整+1
- Find(S,x)的优化
    - 压缩路径
    - 循环两次，第一次先找到根，第二次让找根路径上的所有结点挂在根结点下
    - 代码 ![图片](./并查集-幕布图片-508116-160567.jpg)
    - 优化后使树高不超过O(α(n))
## 应用
- 判断图的连通分量数
    - 遍历各条边，有边相连的两个顶点一定是连通的
    - 将两个顶点所属集合合并为一个集合
    - 处理完所有边，即可将图划分为若干个连通分量
    - 记录并查集中根结点数量即为连通分量数
- 判断图是否有环
    - 在上述遍历各边的过程中出现边的两端顶点已经在同一集合中，则必有环
- Kruskal算法
    - 使用并查集排除加上后产生环的边